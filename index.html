<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Telegram Mini-App Demo</title>
</head>
<body>

  <h1>Welcome!</h1>
  <p id="info"></p>

  <!-- Container for the Telegram login widget -->
  <div id="telegram-login-container"></div>

  <script>
    // Basic check of the User-Agent string to detect Telegram in-app browser
    const isInTelegram = /Telegram/i.test(navigator.userAgent);

    const infoElement = document.getElementById('info');

    if (isInTelegram) {
      // If opened inside Telegram, skip asking for Telegram login
      infoElement.textContent = 'You are inside the Telegram app â€” no need to log in again.';
    } else {
      // If opened in a regular browser, ask the user to log in via Telegram
      infoElement.textContent = 'Please log in with Telegram to continue.';

      // Create the Telegram widget script
      (function() {
        const script = document.createElement('script');
        script.async = true;
        script.src = 'https://telegram.org/js/telegram-widget.js?14';
        // Replace "YOUR_BOT_NAME" with your actual bot name
        script.setAttribute('data-telegram-login', 'YOUR_BOT_NAME');
        script.setAttribute('data-size', 'large');
        script.setAttribute('data-onauth', 'onTelegramAuth(user)');
        // data-request-access can be 'write' or other scopes
        script.setAttribute('data-request-access', 'write');
        document.getElementById('telegram-login-container').appendChild(script);
      })();
    }

    function onTelegramAuth(user) {
      // This function is called by the Telegram widget on successful login
      console.log('User authenticated via Telegram:', user);

      // At this point, you'd typically send user info to your backend
      // to start a session or exchange for tokens.
    }
  </script>

</body>
</html>
